(this["webpackJsonpsff-taobao-items"]=this["webpackJsonpsff-taobao-items"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),i=n(13),o=n.n(i),s=(n(93),n(28)),l=n.n(s),d=n(40),u=n(31),b=n(37),j=(n(95),n(75)),p=n(144),m=n(147),h=n(148),f=n(145),g=n(135),O=n(140),x=n(141),v=n(142),y=n(143),k=n(146),w=n(137),S=n.n(w),C=n(138),N=n(74),$=n(47),F=n.n($),I=n(15);function E(){var e=Object(b.a)(["\n  mutation removeItem($id: String!) {\n    removeItem(\n      id: $id\n    )\n  }\n"]);return E=function(){return e},e}function z(){var e=Object(b.a)(["\n  mutation addItem($title: String!, $price: [Float!]!, $link: String!, $description: String!, $imageLink: String!) {\n    addItem(\n      title: $title,\n      price: $price,\n      link: $link,\n      description: $description,\n      imageLink: $imageLink\n    )\n  }\n"]);return z=function(){return e},e}function A(){var e=Object(b.a)(["\n  {\n    batchItem {\n      id\n      title\n      price\n      link\n      description\n      imageLink\n    }\n  }\n"]);return A=function(){return e},e}var L={title:"",price:[null,null],link:"",description:"",imageLink:""},T=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",padding:0,borderStyle:"solid",borderWidth:"1px",borderColor:"rgba(0, 0, 0, 0.23)",boxShadow:"none",marginBottom:e.spacing(1),textAlign:"left"},details:{overflow:"hidden",overflowWrap:"break-word"},content:{padding:e.spacing(1),flex:"1 0 auto"},cover:{minWidth:150,backgroundColor:"white",borderLeft:"1px solid rgba(0, 0, 0, 0.23)"},edit:{padding:0,borderStyle:"solid",borderWidth:"1px",borderColor:"rgba(0, 0, 0, 0.23)",boxShadow:"none",marginBottom:e.spacing(1),textAlign:"left"}}}));var B=S()(A()),D=S()(z()),W=S()(E()),J=function(e){var t=e.item,n=e.edit,a=e.refresh,c=T(),i=Object(C.a)(W),o=Object(u.a)(i,1)[0],s=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{id:t.id}});case 2:if(n=e.sent,n.data.removeItem){e.next=6;break}return e.abrupt("return");case 6:a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[n&&Object(r.jsxs)("div",{style:{marginBottom:3,textAlign:"right"},children:[Object(r.jsx)(h.a,{style:{backgroundColor:"lightblue",width:"20px !important",height:20},children:" EDIT "}),Object(r.jsx)(h.a,{onClick:s,style:{backgroundColor:"lightsalmon",width:"20px !important",height:20,marginLeft:3},children:" X "})]}),Object(r.jsxs)(O.a,{className:c.root,onClick:function(){var e;(e=t.link,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e))&&window.open(t.link,"_blank")},children:[Object(r.jsx)("div",{className:c.details,children:Object(r.jsxs)(x.a,{className:c.content,children:[Object(r.jsx)(v.a,{component:"h6",variant:"h6",children:t.title}),Object(r.jsx)(v.a,{children:t.price.length<=1?"".concat(t.price[0],"\xa5"):"".concat(t.price[0],"-").concat(t.price[1],"\xa5")}),Object(r.jsx)(v.a,{variant:"subtitle1",color:"textSecondary",children:t.description})]})}),Object(r.jsx)(y.a,{className:c.cover,image:t.imageLink||"https://via.placeholder.com/150x150?text=No+Image"})]})]})},R=JSON.parse(JSON.stringify(L)),_=function(e,t){switch(t.type){case"UPDATE":return Object(N.a)(e,(function(e){F.a.set.apply(F.a,[e].concat([t.path,t.value]))}));case"RESET":return R;default:return e}},U=function(e){var t=e.prop,n=e.formState,a=e.updateForm,c=Object(u.a)(t,2),i=c[0],o=c[1];return Array.isArray(o)?Object(r.jsx)("div",{style:{display:"flex"},children:o.map((function(e,t){return Object(r.jsx)(k.a,{name:"".concat(i,"[").concat(t,"]"),label:"".concat(i," ").concat(t),fullWidth:!0,variant:"outlined",size:"small",style:{marginBottom:5},onChange:a,value:Object($.get)(n,"".concat(i,"[").concat(t,"]"))},"".concat(i,"[").concat(t,"]"))}))}):Object(r.jsx)(k.a,{name:i,label:i,fullWidth:!0,variant:"outlined",size:"small",style:{marginBottom:5},onChange:a,value:Object($.get)(n,"".concat(i))},i)},P=c.a.memo((function(e){var t=e.formState,n=e.updateForm;return Object.entries(L).map((function(e,a){return Object(r.jsx)(U,{prop:e,formState:t,updateForm:n},a)}))})),V=function(e){var t=e.refresh,n=T(),a=Object(C.a)(D),i=Object(u.a)(a,1)[0],o=c.a.useReducer(_,R),s=Object(u.a)(o,2),b=s[0],j=s[1],p=c.a.useCallback((function(e){var t=e.target,n=t.value,r=t.name;t.type;j({type:"UPDATE",path:r,value:n})}),[]),m=function(){var e=Object(d.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b),(n=JSON.parse(JSON.stringify(b))).price[0]=Number(n.price[0]),n.price[1]?n.price[1]=Number(n.price[1]):n.price.length=1,e.next=6,i({variables:n});case 6:r=e.sent,r.data.addItem&&(j({type:"RESET"}),t());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsxs)(O.a,{className:n.edit,style:{padding:5},children:[Object(r.jsx)(P,{formState:b,updateForm:p}),Object(r.jsx)(h.a,{size:"small",onClick:function(){return m("")},style:{backgroundColor:"lightblue",float:"right"},children:"ADD"})]})]})},H=function(){var e=Object(C.b)(B),t=e.loading,n=e.error,a=e.data,c=e.refetch,i=!("/add"!==Object(I.g)().pathname);return Object(r.jsxs)(r.Fragment,{children:[i&&Object(r.jsx)(V,{refresh:c}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:t?Object(r.jsx)("div",{children:"Fetching"}):n?Object(r.jsx)("div",{children:"Error"}):a.batchItem.map((function(e,t){return Object(r.jsx)(J,{refresh:c,item:e,edit:i},t)}))})]})},K=n(56),M=n(55);function X(){var e=Object(b.a)(["\n  mutation login($id: String!, $pw: String!) {\n    login(id: $id, pw: $pw) {\n      token\n      id\n    }\n  }\n"]);return X=function(){return e},e}function Y(){var e=Object(b.a)(["\n  mutation {\n    isLogin\n  }\n"]);return Y=function(){return e},e}var q=Object(j.a)({typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Noto Sans KR"','"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),G=S()(Y()),Q=S()(X()),Z=function(){var e=Object(C.a)(Q),t=Object(u.a)(e,1)[0];function n(){return(n=Object(d.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t({variables:{id:n.target.elements.username.value,pw:n.target.elements.pwd.value}});case 3:(r=e.sent).data.login?((a=new Date).setTime(a.getTime()+36e5),M.set("authorization",r.data.login.token,{path:"/",expires:a}),window.location.href="/#/add"):alert("\uc798\ubabb\ub41c \uacc4\uc815 \uc815\ubcf4\uc785\ub2c8\ub2e4.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"text-center",children:Object(r.jsxs)("form",{onSubmit:function(e){return function(e){return n.apply(this,arguments)}(e)},children:[Object(r.jsx)("h3",{children:"\ub85c\uadf8\uc778"}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:"\uc544\uc774\ub514"}),Object(r.jsx)("input",{name:"username",className:"form-control",placeholder:"\uc544\uc774\ub514 \uc785\ub825"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638"}),Object(r.jsx)("input",{name:"pwd",type:"password",className:"form-control",placeholder:"\ube44\ubc00\ubc88\ud638 \uc785\ub825"})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"\ud655\uc778"})]})})})},ee=c.a.createContext(null);var te=function(){var e=Object(C.a)(G),t=Object(u.a)(e,1)[0],n=Object(a.useState)(null),c=Object(u.a)(n,2),i=c[0],o=c[1];Object(a.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,r=n.data,console.log(r.isLogin),o((function(e){return r.isLogin}));case 6:case"end":return e.stop()}}),e)})))()}),[]);var s=function(){var e=Object(I.g)();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(p.a,{maxWidth:"sm",style:{height:"100vh",padding:0},children:[Object(r.jsxs)(m.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:10},children:[Object(r.jsx)("h3",{children:"\ud0c0\uc624\ubc14\uc624 \uc7a1\ud15c\ubaa8\uc74c"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(h.a,{onClick:function(){return window.open("https://gall.dcinside.com/mgallery/board/lists?id=sff","_blank")},style:{backgroundColor:"#F5C6C9"},children:"SFF\uac24"}),"\xa0\xa0",i?Object(r.jsx)(K.b,{to:"/add"===e.pathname?"/":"/add",children:Object(r.jsx)(h.a,{style:{backgroundColor:"#eee"},children:"\uc218\uc815"})}):Object(r.jsx)(h.a,{onClick:function(){return window.open("https://forms.gle/38ejs1VSAT43YeEV6","_blank")},style:{backgroundColor:"#c6e6f5"},children:"\ucd94\uac00 \uc694\uccad"})]})]}),Object(r.jsx)(H,{})]})})};return Object(r.jsx)(f.a,{theme:q,children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(ee.Provider,{value:i,children:Object(r.jsx)(K.a,{children:Object(r.jsxs)(I.d,{children:[Object(r.jsx)(I.b,{path:"/",exact:!0,component:s}),i&&Object(r.jsx)(I.b,{path:"/add",exact:!0,component:s}),Object(r.jsx)(I.b,{path:"/login",exact:!0,component:Z}),Object(r.jsx)(I.a,{to:"/"})]})})})})})},ne=n(19),re=n(35),ae=n(77),ce=n(76),ie=M.get("authorization"),oe=Object(ae.a)({uri:"https://sff-taobao-items-backend.herokuapp.com",credentials:"same-origin",headers:ie?{Authorization:"".concat(ie)}:{}}),se=new re.a({link:oe,cache:new ce.a});o.a.render(Object(r.jsx)(ne.a,{client:se,children:Object(r.jsx)(te,{})}),document.getElementById("root"))},93:function(e,t,n){},95:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.549824ca.chunk.js.map